<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY thunderbird-download-http     "http://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/&thunderbird-version;/thunderbird-source-&thunderbird-version;.tar.bz2">
  <!ENTITY thunderbird-download-ftp      "ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/&thunderbird-version;/thunderbird-source-&thunderbird-version;.tar.bz2">
  <!ENTITY thunderbird-size              "32.9 MB">
  <!ENTITY thunderbird-buildsize         "637 MB">
  <!ENTITY thunderbird-time              "13.05 SBU">
  <!ENTITY thunderbird-enigmail-version  "0.86.0">
  <!ENTITY thunderbird-ipc-version       "1.0.8">
  <!ENTITY thunderbird-enigmail-download "http://downloads.mozdev.org/enigmail/src/enigmail-&thunderbird-enigmail-version;.tar.gz">
  <!ENTITY thunderbird-ipc-download      "http://downloads.mozdev.org/enigmail/src/ipc-&thunderbird-ipc-version;.tar.gz">
]>

<sect1 id="thunderbird" xreflabel="MozillaThunderbird-&thunderbird-version;">
<sect1info>
<othername>$LastChangedBy$</othername>
<date>$Date$</date>
</sect1info>
<?dbhtml filename="thunderbird.html" ?>
<title>MozillaThunderbird-&thunderbird-version;</title>

<sect2>
<title>Introduction to <application>Mozilla Thunderbird</application></title>

<para><application>Mozilla Thunderbird</application> is a stand-alone 
mail/news client based on the <application>Mozilla</application> 
codebase.</para>

<sect3><title>Package information</title>
<itemizedlist spacing='compact'>
<listitem><para>Download (HTTP): <ulink 
url="&thunderbird-download-http;"/></para></listitem>
<listitem><para>Download (FTP): <ulink 
url="&thunderbird-download-ftp;"/></para></listitem>
<listitem><para>Download size: &thunderbird-size;</para></listitem>
<listitem><para>Estimated Disk space required: 
&thunderbird-buildsize;</para></listitem>
<listitem><para>Estimated build time: 
&thunderbird-time;</para></listitem></itemizedlist>
</sect3>

<sect3><title>Additional downloads</title>
<itemizedlist spacing="compact">
<listitem><para>Required Patch: <ulink
url="&patch-root;/thunderbird-&thunderbird-version;-freetype_fix-1.patch"/></para>
</listitem></itemizedlist>

<para>To enable the <application>Enigmail</application> extension to the 
<application>Thunderbird</application> mail client, you'll need to download the 
two tarballs below. The <application>Enigmail</application> extension allows 
users to access the authentication and encryption features provided by the
<application>GnuPG</application> package.</para>

<itemizedlist spacing='compact'>
<listitem><para><ulink url="&thunderbird-enigmail-download;"/></para></listitem>
<listitem><para><ulink url="&thunderbird-ipc-download;"/></para></listitem>
</itemizedlist>
</sect3>

<sect3><title><application>Mozilla Thunderbird</application> 
dependencies</title>
<sect4><title>Required</title>
<para><xref linkend="zip"/>, 
<xref linkend="GTK2"/> and 
<xref linkend="libIDL"/></para>
</sect4>

<sect4><title>Recommended</title>
<para><xref linkend="gnupg"/> (for <application>Enigmail</application> 
extension)</para>
</sect4>

<sect4><title>Optional</title>
<para><xref linkend="libjpeg"/>, 
<xref linkend="unzip"/>, 
<xref linkend="gnome-vfs"/>, 
<xref linkend="mitkrb"/> or <xref linkend="heimdal"/>, 
<xref linkend="doxygen"/>, 
<ulink url="http://xprint.mozdev.org/">Xprint</ulink>, 
<ulink url="http://perens.com/FreeSoftware/">Electric Fence</ulink> 
and <ulink url="http://cairographics.org/">Cairo</ulink></para>
</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation of <application>Mozilla Thunderbird</application></title>

<!-- <warning>
<para>The current source tarball uses CRLF line-ending (DOS Format). This causes
problems during the compilation. Once you extract the tarball, convert the files
to UNIX style line endings using <xref linkend="hd2u"/>.</para>
<screen><userinput><command>find -type f -print0 | xargs -0 dos2unix -d2u</command></userinput></screen>
</warning> -->

<para>The configuration of <application>Mozilla Thunderbird</application> is 
very similar to <xref linkend="mozilla"/> and hence the options will not be 
discussed. Refer to the <xref linkend="mozilla"/> instructions for
explanations and additional configuration information.</para>

<note><para>There is a known issue with the imbedded help facility in the
<application>Thunderbird</application> build. The <quote>Release Notes</quote> 
and <quote>Mozilla Thunderbird Help</quote> items in the drop down 
<quote>Help</quote> menu will not work. BLFS is working to resolve this 
issue.</para></note>

<para>Compile <application>Mozilla Thunderbird</application> by
running the following commands:</para>

<screen><userinput><command>patch -Np1 -i ../thunderbird-&thunderbird-version;-freetype_fix-1.patch &amp;&amp;
export MOZILLA_OFFICIAL="1" &amp;&amp;
export BUILD_OFFICIAL="1" &amp;&amp;
export MOZ_THUNDERBIRD="1" &amp;&amp;
./configure --prefix=/opt/thunderbird-&thunderbird-version; \
            --with-system-zlib \
            --with-system-png \
            --enable-default-toolkit=gtk2 \
            --disable-ldap \
            --enable-xft \
            --enable-crypto \
            --enable-xinerama \
            --enable-single-profile \
            --enable-extensions=all \
            --disable-installer \
            --disable-tests \
            --disable-debug \
            --enable-optimize \
            --disable-logging \
            --enable-reorder \
            --enable-strip \
            --disable-pedantic \
            --enable-cpp-rtti \
            --disable-profilesharing &amp;&amp;
make</command></userinput></screen>

<para>You may want to add the <option>--with-system-jpeg</option>
switch to the <command>configure</command> script if you have
<application>libjpeg</application> installed.</para>

<para>If you're building the <application>Enigmail</application> extension, 
execute the following steps:</para>

<screen><userinput><command>tar zxf ../enigmail-&thunderbird-enigmail-version;.tar.gz -C extensions &amp;&amp;
tar zxf ../ipc-&thunderbird-ipc-version;.tar.gz -C extensions &amp;&amp;
build/autoconf/make-makefile extensions/ipc extensions/enigmail &amp;&amp;
make -C extensions/ipc &amp;&amp;
make -C extensions/enigmail &amp;&amp;
make -C extensions/enigmail/build xpi &amp;&amp;
make -C extensions/enigmail/package xpi</command></userinput></screen>

<para>Install <application>Thunderbird</application> by running the following 
commands:</para>

<screen><userinput><command>make install &amp;&amp;
install -d /opt/thunderbird-&thunderbird-version;/include/thunderbird-&thunderbird-version;/nss &amp;&amp;
cp -Lf dist/private/nss/*.h dist/public/nss/*.h \
    /opt/thunderbird-&thunderbird-version;/include/thunderbird-&thunderbird-version;/nss &amp;&amp;
chown -R root:root /opt/thunderbird-&thunderbird-version;/include/thunderbird-&thunderbird-version;/nss &amp;&amp;
ln -sf /opt/thunderbird-&thunderbird-version;/bin/thunderbird \
    /usr/bin/MozillaThunderbird</command></userinput></screen>

<para>If desired, install the <application>Enigmail</application> extension 
by running the following commands:</para>

<screen><userinput><command>make -C extensions/ipc install &amp;&amp;
make -C extensions/enigmail install</command></userinput></screen>

<para>To enable multi-user operation, execute the following:</para>

<screen><userinput><command>cd /opt/thunderbird-&thunderbird-version;/lib/thunderbird-&thunderbird-version; &amp;&amp;
export LD_LIBRARY_PATH="$PWD" &amp;&amp;
export MOZILLA_FIVE_HOME="$PWD" &amp;&amp;
./regxpcom &amp;&amp;
./regchrome &amp;&amp;
touch `find . -name *.rdf`</command></userinput></screen>

<para>There are three overlay definitions which cause menu functionality and  
display problems. Remove these definitions with the following commands:</para>

<screen><userinput><command>export CHROME_PATH="/opt/thunderbird-&thunderbird-version;/lib/thunderbird-&thunderbird-version;/chrome" &amp;&amp;
sed -i.orig -e "/cookieContextOverlay/d" \
    $CHROME_PATH/overlayinfo/messenger/content/overlays.rdf &amp;&amp;
sed -i.orig -e "/cookieContextOverlay/d" -e "/helpMenuOverlay/d" \
    $CHROME_PATH/overlayinfo/communicator/content/overlays.rdf &amp;&amp;
unset CHROME_PATH LD_LIBRARY_PATH MOZILLA_FIVE_HOME \
    MOZILLA_OFFICIAL BUILD_OFFICIAL MOZ_THUNDERBIRD</command></userinput></screen>

<note><para>You should run 
<command>/opt/thunderbird-&thunderbird-version;/bin/thunderbird</command> 
once as the root user (or any user with write privileges) to 
create some necessary additional files in the 
<filename class='directory'>/opt/thunderbird-&thunderbird-version;</filename> 
hierarchy.</para></note>

</sect2>

<sect2>
<title>Contents</title>

<para>The <application>Thunderbird</application> package contains
<command>thunderbird</command> and numerous email/newsgroup components, 
plugins and extensions.</para>

</sect2>

<sect2><title>Description</title>

<sect3><title>thunderbird</title>
<para><command>thunderbird</command> is <application>Mozilla</application>'s 
next-generation email and newsgroup client.</para></sect3>

</sect2>

</sect1>

