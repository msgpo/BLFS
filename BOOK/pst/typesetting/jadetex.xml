<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY jadetex-download-http "http://prdownloads.sourceforge.net/jadetex/jadetex-&jadetex-version;.tar.gz">
  <!ENTITY jadetex-download-ftp  " ">
  <!ENTITY jadetex-md5sum        "634dfc172fbf66a6976e2c2c60e2d198">
  <!ENTITY jadetex-size          "103 KB">
  <!ENTITY jadetex-buildsize     "9.3 MB">
  <!ENTITY jadetex-time          "0.04 SBU">
]>

<sect1 id="jadetex" xreflabel="JadeTeX-&jadetex-version;">
<sect1info>
<othername>$LastChangedBy$</othername>
<date>$Date$</date>
</sect1info>
<?dbhtml filename="jadetex.html"?>
<title>JadeTeX-&jadetex-version;</title>
<indexterm zone="jadetex">
<primary sortas="a-JadeTeX">JadeTeX</primary></indexterm>

<sect2>
<title>Introduction to <application>JadeTeX</application></title>

<para>The <application>JadeTeX</application> package is a companion package to 
the <application>OpenJade</application> <acronym>DSSSL</acronym> processor. 
<application>JadeTeX</application> transforms high level LaTeX macros into 
<acronym>DVI</acronym>/PostScript and Portable Document Format 
(<acronym>PDF</acronym>) forms.</para>

<sect3><title>Package information</title>
<itemizedlist spacing='compact'>
<listitem><para>Download (HTTP): 
<ulink url="&jadetex-download-http;"/></para></listitem>
<listitem><para>Download (FTP): 
<ulink url="&jadetex-download-ftp;"/></para></listitem>
<listitem><para>Download MD5 sum: &jadetex-md5sum;</para></listitem>
<listitem><para>Download size: &jadetex-size;</para></listitem>
<listitem><para>Estimated disk space required: 
&jadetex-buildsize;</para></listitem>
<listitem><para>Estimated build time: 
&jadetex-time;</para></listitem></itemizedlist>
</sect3>

<sect3><title>Additional downloads</title>
<itemizedlist spacing='compact'>
<listitem><para>Recommended demo files: <ulink 
url="http://anduin.linuxfromscratch.org/sources/BLFS/SVN/I-K/jadetex-3.13-demo.tar.bz2"/>
</para></listitem>
</itemizedlist>
</sect3>

<sect3><title><application>JadeTeX</application> dependencies</title>
<sect4><title>Required</title>
<para><xref linkend="tex"/> and 
<xref linkend="openjade"/></para>
</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation of <application>JadeTeX</application></title>

<para>If you downloaded the demo files tarball, unpack it along with the 
source tarball. It will unpack as a 
<filename class='directory'>demo</filename> directory in the root of the 
source tree.</para>

<para>First, as the root user, make some required modifications to the 
<filename>texmf.cnf</filename> file already installed on the system by the 
<application>TeX</application> package, then build a new 
<filename>latex.fmt</filename> file using the following commands:</para>

<screen><userinput role='root'><command>sed -i.orig -e "s/original texmf.cnf/modified texmf.cnf/" \
            -e "s/memory hog.../&amp;\npool_size.context = 750000/" \
    $(kpsewhich texmf.cnf) &amp;&amp;
cat &gt;&gt; $(kpsewhich texmf.cnf) &lt;&lt; "EOF"</command>

% The following 3 sections added for JadeTeX

% latex settings
main_memory.latex = 1100000
param_size.latex = 1500
stack_size.latex = 1500
hash_extra.latex = 15000
string_vacancies.latex = 45000
pool_free.latex = 47500
nest_size.latex = 500
save_size.latex = 5000
pool_size.latex = 500000
max_strings.latex = 55000
font_mem_size.latex= 400000

% jadetex settings
main_memory.jadetex = 1500000
param_size.jadetex = 1500
stack_size.jadetex = 1500
hash_extra.jadetex = 50000
string_vacancies.jadetex = 45000
pool_free.jadetex = 47500
nest_size.jadetex = 500
save_size.jadetex = 5000
pool_size.jadetex = 500000
max_strings.jadetex = 55000

% pdfjadetex settings
main_memory.pdfjadetex = 2500000
param_size.pdfjadetex = 1500
stack_size.pdfjadetex = 1500
hash_extra.pdfjadetex = 50000
string_vacancies.pdfjadetex = 45000
pool_free.pdfjadetex = 47500
nest_size.pdfjadetex = 500
save_size.pdfjadetex = 5000
pool_size.pdfjadetex = 500000
max_strings.pdfjadetex = 55000

<command>EOF
LATEX_FMT_DIR="$(kpsewhich -expand-var '$TEXMFSYSVAR')/web2c" &amp;&amp;
mv -v $(kpsewhich latex.fmt) $(kpsewhich latex.fmt).orig &amp;&amp;
mv -v $LATEX_FMT_DIR/latex.log $LATEX_FMT_DIR/latex.log.orig &amp;&amp;
fmtutil-sys --byfmt latex</command></userinput></screen>

<para>Install <application>JadeTex</application> using the following 
commands:</para>

<screen><userinput><command>make</command></userinput></screen>

<para>Now, as the root user:</para>

<screen><userinput role='root'><command>install -v -m755 -d \
    $(kpsewhich -expand-var '$TEXMFLOCAL')/tex/jadetex/config &amp;&amp;
install -v -m644 dsssl.def jadetex.ltx \
    $(kpsewhich -expand-var '$TEXMFLOCAL')/tex/jadetex &amp;&amp;
install -v -m644 {,pdf}jadetex.ini \
    $(kpsewhich -expand-var '$TEXMFLOCAL')/tex/jadetex/config &amp;&amp;
FMTUTIL_CNF="$(kpsewhich fmtutil.cnf)" &amp;&amp;
mv $FMTUTIL_CNF $FMTUTIL_CNF.orig &amp;&amp;
cat $FMTUTIL_CNF.orig - &gt;&gt; $FMTUTIL_CNF &lt;&lt; "EOF"</command>

# JadeTeX formats:
jadetex         etex            -               "&amp;latex"     jadetex.ini
pdfjadetex      pdfetex         -               "&amp;pdflatex"  pdfjadetex.ini

<command>EOF
mv -v $(kpsewhich -expand-var '$TEXMFMAIN')/ls-R \
      $(kpsewhich -expand-var '$TEXMFMAIN')/ls-R.orig &amp;&amp;
mv -v $(kpsewhich -expand-var '$TEXMFSYSVAR')/ls-R \
      $(kpsewhich -expand-var '$TEXMFSYSVAR')/ls-R.orig &amp;&amp;
mktexlsr &amp;&amp;
fmtutil-sys --byfmt jadetex &amp;&amp;
fmtutil-sys --byfmt pdfjadetex &amp;&amp;
mktexlsr &amp;&amp;
ln -v -sf etex /usr/bin/jadetex &amp;&amp;
ln -v -sf pdfetex /usr/bin/pdfjadetex</command></userinput></screen>

<para>If you downloaded the demo files tarball, issue the following commands 
as an unprivileged user to test the functionality of the new 
<application>JadeTex</application> installation:</para>

<screen><userinput><command>cd demo &amp;&amp;
openjade -t tex -d demo.dsl demo.sgm &amp;&amp;
jadetex demo.tex &amp;&amp;
pdfjadetex demo.tex</command></userinput></screen>

<para>The commands should complete without errors or warnings and create 
<filename>demo.dvi</filename> and <filename>demo.pdf</filename> files.</para>

</sect2>

<sect2>
<title>Command explanations</title>

<para><command>sed -i -e ... -e ... $(kpsewhich texmf.cnf)</command>: 
This command uses <command>kpsewhich</command> to locate the installed 
 <filename>texmf.cnf</filename>. The first change is used to modify the
header of the file so that if <application>TeX</application> is upgraded, 
the file won't get overwritten. The next change adds a parameter to 
increase ConTeXt's memory size to accommodate 
<application>JadeTeX</application>.</para>

<para><command>fmtutil-sys ...</command>: These commands are used to build 
the <filename>latex.fmt</filename>, <filename>jadetex.fmt</filename> and 
<filename>pdfjadetex.fmt</filename> files. Additionally, the command 
automagically places the files in the correct directory.</para>

<para><command>mktexlsr; ln -v -sf tex ...; ln -v -sf pdftex ...</command>: The 
<application>JadeTeX</application> programs are actually just symlinks to the 
<application>TeX</application> programs. <command>mktexlsr</command> updates
<application>TeX</application>'s <filename>ls-R</filename> database used by 
the <filename class='libraryfile'>libkpathsea</filename> library so that
<application>TeX</application> knows to use the 
<application>JadeTeX</application> <filename>.fmt</filename> files when 
<command>jadetex</command> or <command>pdfjadetex</command> is called.</para>

</sect2>

<sect2>
<title>Configuring <application>JadeTeX</application></title>

<sect3><title>Config files</title>
<para><filename>jadetex.dtx</filename> in the 
<application>JadeTeX</application> source tree.</para>
</sect3>

<sect3><title>Configuration Information</title>

<para>If you need to modify the default <application>JadeTeX</application> 
macro settings, see the 
<ulink url="http://jadetex.sourceforge.net/#index-div-d18e397">
<application>JadeTeX</application> <acronym>FAQ</acronym></ulink>.</para>
</sect3>

</sect2>

<sect2>
<title>Contents</title>

<segmentedlist>
<segtitle>Installed Programs</segtitle>
<segtitle>Installed Libraries</segtitle>
<segtitle>Installed Directories</segtitle>
<seglistitem>
<seg>jadetex and pdfjadetex</seg>
<seg>None</seg>
<seg>/usr/share/texmf-local</seg>
</seglistitem>
</segmentedlist>

<variablelist>
<bridgehead renderas="sect3">Short Descriptions</bridgehead>
<?dbfo list-presentation="list"?>

<varlistentry id="jadetex-prog">
<term><command>jadetex</command></term>
<listitem><para>transforms LaTeX macros created by 
<application>OpenJade</application> into <acronym>DVI</acronym>/PostScript 
forms.</para>
<indexterm zone="jadetex jadetex-prog">
<primary sortas="b-jadetex">jadetex</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="pdfjadetex">
<term><command>pdfjadetex</command></term>
<listitem><para>transforms LaTeX macros created by
<application>OpenJade</application> into Portable Document Format
(<acronym>PDF</acronym>) forms.</para>
<indexterm zone="jadetex pdfjadetex">
<primary sortas="b-pdfjadetex">pdfjadetex</primary></indexterm>
</listitem>
</varlistentry>
</variablelist>

</sect2>

</sect1>

