<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

<!ENTITY exim-download-http "http://www.exim.org/ftp/exim4/exim-&exim-version;.tar.bz2">
<!ENTITY exim-download-ftp "ftp://ftp.exim.org/pub/exim/exim4/exim-&exim-version;.tar.bz2">
<!ENTITY exim-size "1.4 MB">
<!ENTITY exim-buildsize "14.9 MB">
<!ENTITY exim-time "0.14 SBU">
]>

<sect1 id="exim" xreflabel="Exim-&exim-version;">
<sect1info>
<othername>$LastChangedBy$</othername>
<date>$Date$</date>
</sect1info>
<?dbhtml filename="exim.html"?>
<title><application>Exim</application>-&exim-version;</title>

<sect2>
<title>Introduction to <application>Exim</application></title>

<para>The <application>Exim</application> package contains a Mail Transport 
Agent written by the University of Cambridge, released under the 
<acronym>GNU</acronym> Public License.</para>

<sect3><title>Package information</title>
<itemizedlist spacing='compact'>
<listitem><para>Download (HTTP): 
<ulink url="&exim-download-http;"/></para></listitem>
<listitem><para>Download (FTP): 
<ulink url="&exim-download-ftp;"/></para></listitem>
<listitem><para>Download size: 
&exim-size;</para></listitem>
<listitem><para>Estimated disk space required: 
&exim-buildsize;</para></listitem>
<listitem><para>Estimated build time: 
&exim-time;</para></listitem></itemizedlist>
</sect3>

<sect3><title>Additional downloads</title>
<itemizedlist spacing="compact">
<listitem><para>Required patch for Berkeley DB: <ulink 
url="&patch-root;/exim-&exim-version;-db43-1.patch"/></para>
</listitem></itemizedlist>
</sect3>

<sect3><title><application>Exim</application> dependencies</title>
<sect4><title>Required</title>
<para><xref linkend="db"/> or 
<xref linkend="gdbm"/> or 
<ulink url="http://sourceforge.net/projects/tdb">TDB</ulink></para>
</sect4>

<sect4><title>Optional</title>
<para>X (<xref linkend="xfree86"/> or <xref linkend="xorg"/>), 
<xref linkend="openldap"/>, 
<xref linkend="openssl-package"/> or 
<ulink url="http://www.gnu.org/software/gnutls/">GnuTLS</ulink>, 
<xref linkend="cyrus-sasl"/>, 
<xref linkend="mysql"/>, 
<xref linkend="postgresql"/>, 
<xref linkend="tcpwrappers"/> and 
<xref linkend="Linux_PAM"/></para>
</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation of <application>Exim</application></title>

<para>Before building <application>Exim</application>, you should 
create the group and user exim which will run the 
<command>exim</command> daemon:</para>

<para>If you have Berkeley DB installed, apply
the following patch:</para>

<screen><userinput><command>patch -Np1 -i ../exim-&exim-version;-db43-1.patch</command></userinput></screen>

<screen><userinput><command>groupadd exim &amp;&amp;
useradd -d /dev/null -c "Exim Daemon" -g exim -s /bin/false exim</command></userinput></screen>

<para>Install <application>Exim</application> with the following 
commands:</para>

<screen><userinput><command>sed -e 's,^BIN_DIR.*$,BIN_DIRECTORY=/usr/sbin,' src/EDITME | \
  sed -e 's,^CONF.*$,CONFIGURE_FILE=/etc/exim.conf,' | \
  sed -e 's,^EXIM_USER.*$,EXIM_USER=exim,' | \
  sed -e 's,^EXIM_MONITOR,#EXIM_MONITOR,' > Local/Makefile &amp;&amp;
make &amp;&amp;
make install &amp;&amp;
install -v -m644 doc/exim.8 /usr/share/man/man8 &amp;&amp;
install -v -d -m755 /usr/share/doc/exim-&exim-version; &amp;&amp;
install -v -m644 doc/* /usr/share/doc/exim-&exim-version; &amp;&amp;
ln -sv exim /usr/sbin/sendmail</command></userinput></screen>

</sect2>

<sect2>
<title>Command explanations</title>

<para><command>sed -e ... > Local/Makefile</command>: Most of 
<application>Exim</application>'s configuration options are compiled in using 
the directives in <filename>Local/Makefile</filename> which is created from 
the <filename>src/EDITME</filename> file. This command specifies the minimum 
set of options. Descriptions for the options are listed below.</para>

<para><parameter>BIN_DIRECTORY=/usr/sbin</parameter>: This installs all of 
<application>Exim</application>'s binaries and scripts in 
<filename class='directory'>/usr/sbin</filename>.</para>

<para><parameter>CONFIGURE_FILE=/etc/exim.conf</parameter>: This installs 
<application>Exim</application>'s main configuration file in 
<filename class='directory'>/etc</filename>.</para>

<para><parameter>EXIM_USER=exim</parameter>: This tells 
<application>Exim</application> that after the daemon no longer needs root 
privileges, the process hands off the daemon to the exim user.</para>

<para><parameter>#EXIM_MONITOR</parameter>: This defers building the 
<application>Exim</application> monitor program, as it requires 
<application>X</application> Window System support, by commenting out the 
<parameter>EXIM_MONITOR</parameter> line in the <filename>Makefile</filename>. 
If you wish to build the monitor program, omit this <command>sed</command> 
command and issue the following command before building the package (modify 
<filename>Local/eximon.conf</filename>, if necessary): 
<command>cp exim_monitor/EDITME Local/eximon.conf</command>.</para>

<para><command>ln -s exim /usr/sbin/sendmail</command>: Creates a link to 
<command>sendmail</command> for applications which need it. 
<application>Exim</application> will accept most 
<application>Sendmail</application> command-line options.</para>

</sect2>

<sect2>
<title>Adding additional functionality</title>

<para>To utilize some or all of the dependency packages, you'll need to modify 
<filename>Local/Makefile</filename> to include the appropriate directives and 
parameters to link additional libraries before you build 
<application>Exim</application>. <filename>Local/Makefile</filename> is 
heavily commented with instructions on how to do this. Listed below is 
additional information to help you link these dependency packages.</para>

<para>To use a backend database other than <application>Berkelely 
DB</application>, see the instructions at <ulink 
url="http://www.exim.org/exim-html-4.40/doc/html/spec_4.html#SECT4.3"/>.</para>

<para>For <acronym>SSL</acronym> functionality, see the instructions at <ulink 
url="http://www.exim.org/exim-html-4.40/doc/html/spec_4.html#SECT4.6"/> and 
<ulink 
url="http://www.exim.org/exim-html-4.40/doc/html/spec_37.html#CHAP37"/>.</para>

<para>For <application>tcpwrappers</application> functionality, see the 
instructions at <ulink 
url="http://www.exim.org/exim-html-4.40/doc/html/spec_4.html#SECT4.7"/>.</para>

<para>For information about adding authentication mechanisms to the 
build, see the instructions at <ulink 
url="http://www.exim.org/exim-html-4.40/doc/html/spec_34.html#SECT34.4"/> For 
specific information about using <application>Cyrus-SASL</application>, see 
section 10 of the <filename>doc/NewStuff</filename> file located in the source 
tree.</para>

<para>For information about linking <application>Linux-PAM</application>, see 
the instuctions at <ulink 
url="http://www.exim.org/exim-html-4.40/doc/html/spec_11.html#IX935"/>.</para>

<para>For information about linking database engine libraries used for 
<application>Exim</application> name lookups, see the instuctions at <ulink 
url="http://www.exim.org/exim-html-4.40/doc/html/spec_9.html#CHAP9"/>.</para> 

<para>If you wish to add <application>Readline</application> support to 
<application>Exim</application> when invoked in <quote>test expansion</quote> 
(-bv) mode, see the information in section 8 of the 
<filename>doc/NewStuff</filename> file located in the source tree.</para>

<para>You may wish to modify the default configuration and send log files to 
syslog instead of the default 
<filename class='directory'>/var/spool/exim/log</filename> directory. See the 
information at <ulink 
url="http://www.exim.org/exim-html-4.40/doc/html/spec_45.html#CHAP45"/>.</para>

</sect2>

<sect2>
<title>Configuring Exim</title>

<sect3><title>Config files</title>

<para><filename>/etc/exim.conf</filename> and 
<filename>/etc/aliases</filename></para>

</sect3>

<sect3><title>Configuration Information</title>

<para>A default (nothing but comments) <filename>/etc/aliases</filename> file 
is installed during the package installation if this file did not exist on 
your system. Create the necessary aliases and start the 
<application>Exim</application> daemon using the following commands:</para>

<screen><userinput><command>cat &gt;&gt; /etc/aliases &lt;&lt; "EOF"</command>
postmaster: root
MAILER-DAEMON: root
<command>EOF
exim -v -bi &amp;&amp;
/usr/sbin/exim -bd -q15m</command></userinput></screen>

<note><para>To protect an existing <filename>/etc/aliases</filename> file, 
the command above appends these aliases to it. This file should be checked and 
duplicate aliases removed, if present.</para></note>

<para>The <command>/usr/sbin/exim -bd -q15m</command> command starts the 
<application>Exim</application> daemon with a 15 minute interval in processing 
the mail queue. Adjust this parameter to suit your desires.</para>

<para>To automate the running of <command>exim</command> at startup, install 
the <filename>/etc/rc.d/init.d/exim</filename> init script included in the 
<xref linkend="intro-important-bootscripts"/> package.</para>

<screen><userinput><command>make install-exim</command></userinput></screen>

<para>The bootscript also starts the <application>Exim</application> daemon 
and dispatches a queue runner process every 15 minutes. Modify the 
<parameter>-q<replaceable>[time interval]</replaceable></parameter> parameter 
in <filename>/etc/rc.d/init.d/exim</filename>, if necessary for your 
installation.</para>
</sect3>

</sect2>

<sect2>
<title>Contents</title>

<para>The <application>Exim</application> package contains
<command>exim</command>,
<command>exim_dumpdb</command>,
<command>exim_fixdb</command>,
<command>exim_tidydb</command>,
<command>exinext</command>,
<command>exiwhat</command>,
<command>exim_dbmbuild</command>,
<command>exicyclog</command>,
<command>exigrep</command>,
<command>eximstats</command>,
<command>exiqsumm</command>,
<command>exiqgrep</command>,
<command>exim_lock</command>, 
<command>exim_checkaccess</command> and optionally, 
<command>eximon</command> and 
<command>eximon.bin</command>.</para>

</sect2>

<sect2><title>Description</title>
<sect3><title>exim</title>
<para><command>exim</command> is the Mail Transport Agent daemon.</para></sect3>

<sect3><title>exim_dumpdb</title>
<para><command>exim_dumpdb</command> writes the contents of 
<application>Exim</application> databases to the standard output.</para></sect3>

<sect3><title>exim_fixdb</title>
<para><command>exim_fixdb</command> modifies data in 
<application>Exim</application> databases.</para></sect3>

<sect3><title>exim_tidydb</title>
<para><command>exim_tidydb</command> removes old records from 
<application>Exim</application> databases.</para></sect3>

<sect3><title>exinext</title>
<para><command>exinext</command> queries remote host retry times.</para></sect3>

<sect3><title>exiwhat</title>
<para><command>exiwhat</command> queries running 
<application>Exim</application> processes.</para></sect3>

<sect3><title>exim_dbmbuild</title>
<para><command>exim_dbmbuild</command> creates and rebuilds 
<application>Exim</application> databases.</para></sect3>

<sect3><title>exicyclog</title>
<para><command>exicyclog</command> cycles 
<application>Exim</application> log files.</para></sect3>

<sect3><title>exigrep</title>
<para><command>exigrep</command> searches 
<application>Exim</application> log files.</para></sect3>

<sect3><title>eximstats</title>
<para><command>eximstats</command> generates mail statistics from 
<application>Exim</application> log files.</para></sect3>

<sect3><title>exiqsumm</title>
<para><command>exiqsumm</command> produces a summary of the messages in the 
mail queue.</para></sect3> 

<sect3><title>exiqgrep</title>
<para><command>exiqgrep</command> is an utility for selective queue
listing.</para></sect3>

<sect3><title>exim_lock</title>
<para><command>exim_lock</command> locks a mailbox file.</para></sect3>

<sect3><title>exim_checkaccess</title>
<para><command>exim_checkaccess</command> states whether a given recipient 
address from a given host is acceptable or not.</para></sect3>

</sect2>

</sect1>

