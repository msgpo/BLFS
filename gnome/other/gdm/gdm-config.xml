<sect2>
<title>Configuring gdm</title>

<sect3><title>Config files</title>
<para><userinput>/opt/gnome2/gdm.conf /opt/gnome2/gnomerc</userinput></para>
</sect3>

<sect3><title>Configuration Information</title>

<para>The gdm PAM config files contain modules not present in a BLFS
installation.  The following commands will replace those files:</para>
<screen><userinput>cat &gt; /etc/pam.d/gdm &lt;&lt; "EOF"</userinput>
auth        required    pam_unix.so
auth        required    pam_nologin.so
account     required    pam_unix.so
password    required    pam_unix.so
session     required    pam_unix.so
<userinput>EOF</userinput></screen>
<screen><userinput>cat &gt; /etc/pam.d/gdm-autologin &lt;&lt; "EOF"</userinput>
auth        required    pam_env.so
auth        required    pam_nologin.so
auth        required    pam_permit.so
account     required    pam_unix.so
password    required    pam_unix.so
session     required    pam_unix.so
<userinput>EOF</userinput></screen>

<para>gdm can be tested by executing it from a root console.</para>

<para>To automate the running of gdm, use the following command to
create the init.d script:
<screen><userinput>cat &gt; /etc/rc.d/init.d/gdm &lt;&lt; "EOF"</userinput>
#!/bin/bash
# Begin $rc_base/init.d/gdm

# Based on sysklogd script from LFS-3.1 and earlier.
# Rewritten by Gerard Beekmans  - gerard@linuxfromscratch.org

source /etc/sysconfig/rc
source $rc_functions

case "$1" in
        start)
                echo "Starting gdm..."
                loadproc /opt/gnome2/bin/gdm
                ;;

        stop)
                echo "Stopping gdm..."
                loadproc /opt/gnome2/sbin/gdm-stop
                ;;

        reload)
                echo "Reloading gdm..."
                reloadproc /opt/gnome2/sbin/gdm-safe-restart
                ;;

        restart)
                echo "Restarting gdm..."
		loadproc /opt/gnome2/sbin/gdm-restart
                ;;

        *)
                echo "Usage: $0 {start|stop|reload|restart}"
                exit 1
                ;;
esac

# End $rc_base/init.d/gdm
<userinput>EOF
chmod 755 /etc/rc.d/init.d/gdm</userinput></screen></para>

<para>Create the symbolic links to this file in the relevant rc.d
directory with the following commands:
<screen><userinput>cd /etc/rc.d/init.d &amp;&amp;
ln -sf ../init.d/gdm ../rc0.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc1.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc2.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc3.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc4.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc5.d/S95gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc6.d/K05gdm</userinput></screen></para>

<para>To autostart with a graphical login, edit
<filename>/etc/inittab</filename> so that the line reading
<screen>id:3:initdefault:</screen>
is changed to 
<screen>id:5:initdefault:</screen></para>

</sect3>

</sect2>

