<sect1 id="ch04-checkrender">
<title>Check that the book renders properly</title>
<?dbhtml filename="checkrender.html" dir="chapter04"?>

<para>Before commiting any changes, it's important to check that you
have all the syntax correct and that the book can actually pass through
<userinput>openjade</userinput> without making it belch.  Instructions
on how to render the book can be found in the CVS rep in the
<filename>INSTALL</filename> and <filename>README</filename> files.
It's generally best to have a script which automatically does it all for
you.  I'll give my script here (no comments on the coding standard
please) which I have in <filename>~/scripts</filename> as
<filename>updatehtmlb</filename>.  <filename>~/scripts</filename> is
then on my path, making an update simply a quick command away:
<screen>#!/bin/sh

# This script is licensed under the usual BSD rules which LFS projects
# generally follow.  I accept no responsibility if it causes any damage
# including, but not limited to, blowing up household pets.
# Mark Hymers &lt;markh@linuxfromscratch.org&gt;

BLFS_XML=/home/mark/LFS/BLFS
BLFS_HTML=/home/mark/LFS/htmlb

if [ ! -d $BLFS_XML ]
  then
    echo "$BLFS_XML doesn't exist"
  else
    echo "Updating $BLFS_HTML"

    if [ -d $BLFS_HTML ]
    then
        cd $BLFS_HTML && rm -fr *
    else
      mkdir $BLFS_HTML && cd $BLFS_HTML
    fi

    mkdir introduction postlfs general connect basicnet server \
          content x kde gnome xsoft multimedia pst preface \
          appendices other

    /usr/bin/openjade -t sgml \
      -d /usr/share/dsssl/docbook/html/blfs.dsl \
      /usr/share/dsssl/docbook/dtds/decls/xml.dcl \
      $BLFS_XML/index.xml

    cd other

    /usr/bin/openjade -t sgml \
      -V nochunks \
      -d /usr/share/dsssl/docbook/html/lfs.dsl \
      /usr/share/dsssl/docbook/dtds/decls/xml.dcl \
      $BLFS_XML/index.xml > nochunks.html

#	
#   Note that you can leave out this section if you don't have htmltidy
#   installed (http://tidy.sf.net)
#

    for i in `find ./ -name "*.html"`
    do
    tidy -q -latin1 -m $i
    cp $i $i.bak
    sed '4i\
&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15"&gt;' $i.bak &gt; $i
    rm -f $i.bak
    done

#
#   End of HTML Tidy section
#

    htmldoc --book --firstpage p1 -v -t ps3 -f blfs.ps nochunks.html
    htmldoc --book --firstpage p1 -v -t pdf13 -f blfs.pdf nochunks.html
    lynx -dump nochunks.html > blfs.txt

fi</screen></para>

</sect1>
