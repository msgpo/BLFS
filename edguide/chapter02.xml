<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE bookinfo PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
   
<chapter id="chapter02">
<title>CVS Access</title>
<?dbhtml filename="chapter02.html" ?>


<sect1 id="ch02-introduction">
<title>Introduction</title>

<para>The shadowfax CVS server provides services for all of the *LFS
projects (and some others).  The tree which we are interested in for
BLFS editing is (unsurprisingly) the BLFS tree.  A complete list of the
modules which are available can be found using the cvsweb interface at
<ulink url="http://cvs.linuxfromscratch.org/index.cgi/"/>.</para>

<para>There are two types of CVS access provided to the BLFS tree.
Firstly, there is anonymous read-only access which anyone can use.
Secondly, there is read-write access granted to active editors who have
shadowfax accounts.</para>


<sect2 id="ch02-anoncvs">
<title>Anonymous Access</title>

<para>To get anonymous access, simply use the following commands (note
that these assume you are using bash or a similar shell.  csh users may
have to modify the export command):
<screen><userinput>export CVSROOT=:pserver:anonymous@cvs.linuxfromscratch.org:/home/cvsroot
cvs login</userinput></screen>
[just press return when prompted for a password]
<screen><userinput>cvs checkout BLFS/BOOK</userinput></screen></para>

<para>This will create a BLFS/BOOK directory and copy the current working
tree into it.  When you wish to update your local copy (often called a
sandbox), simply cd into the directory and run:
<screen><userinput>cvs update</userinput></screen></para>

</sect2>

<sect2 id="ch02-cvsssh">
<title>SVN SSH Access (for editors)</title>

<para>For editors, access is slightly more complicated.  You first of
all need to generate yourself an ssh key-pair.  You then need to upload
your public key into your <filename>~/.ssh</filename> directory on
shadowfax.  To generate the keys run:
<screen><userinput>ssh-keygen -t dsa</userinput></screen>
When prompted as to where to save them, it's probably best to leave them
in .ssh (as <filename>id_dsa</filename> and
<filename>id_dsa.pub</filename>) unless you already have ssh keys there.
When prompted for a passphrase just press enter (unless you want to have
to give the phrase <emphasis>every</emphasis> time you perform a cvs
operation.  Having generated your keys, upload
<filename>~/.ssh/id_dsa.pub</filename> to shadowfax and move it to
<filename>~/.ssh/authorized_keys2</filename> <emphasis>on
shadowfax</emphasis>.  (Your local copy of <filename>id_dsa</filename>
and <filename>id_dsa.pub</filename> should remain untouched by
this.)</para>

<para>Once you've done this, you need to set environment variables like
this:
<screen><userinput>export CVS_RSH=ssh
export CVSROOT=:ext:USERNAME@cvs.linuxfromscratch.org:/home/cvsroot</userinput></screen>
But obviously replacing <emphasis>USERNAME</emphasis> with your
shadowfax username.  I tend to place this into a script which I then
source from my .bash_profile or .bashrc script as appropriate.  If you
only (or mainly) work with the LFS CVS server, this makes life easier as
the right variables are always set (and you can override them at the
command line temporarily if you need to use another server for some
reason).</para>

<para>Once you have this setup, try to checkout the BLFS tree using:
<screen><userinput>cvs checkout BLFS/BOOK</userinput></screen>
If this works, you'll get a nice BLFS/BOOK directory listing and you have
your own sandbox!.  You also have write access so from now on be extra
careful but note that <emphasis>no</emphasis> changes will be made until
you use a <userinput>cvs commit</userinput> command.</para>

<para>As with anonymous access, you can update your local copy (often
called a sandbox) by simply cd'ing into the BLFS directory and running:
<screen><userinput>cvs update</userinput></screen></para>

</sect2>
</sect1>

</chapter>
