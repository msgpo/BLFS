<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY mysql-download-http "http://mysql.he.net/Downloads/MySQL-4.1/mysql-&mysql-version;.tar.gz">
  <!ENTITY mysql-download-ftp  "ftp://mirror.mcs.anl.gov/pub/mysql/Downloads/MySQL-4.1/mysql-&mysql-version;.tar.gz">
  <!ENTITY mysql-md5           "04c08d2a5cc39050d9fa4727f8f197e8">
  <!ENTITY mysql-size          "19 MB">
  <!ENTITY mysql-buildsize     "117 MB">
  <!ENTITY mysql-time          "2.83 SBU">
]>

<sect1 id="mysql" xreflabel="MySQL-&mysql-version;">
<sect1info>
<othername>$LastChangedBy$</othername>
<date>$Date$</date>
</sect1info>
<?dbhtml filename="mysql.html"?>
<title>MySQL-&mysql-version;</title>

<sect2>
<title>Introduction to <application>My<acronym>SQL</acronym></application>
</title>

<para><application>My<acronym>SQL</acronym></application> is a widely used and 
fast <acronym>SQL</acronym> database server. It is a client/server 
implementation that consists of a server daemon and many different 
client programs and libraries.</para>

<sect3><title>Package information</title>
<itemizedlist spacing='compact'>
<listitem><para>Download (HTTP): <ulink url="&mysql-download-http;"/></para></listitem>
<listitem><para>Download (FTP): <ulink url="&mysql-download-ftp;"/></para></listitem>
<listitem><para>MD5 Sum: &mysql-md5;</para></listitem>
<listitem><para>Download size: &mysql-size;</para></listitem>
<listitem><para>Estimated disk space required: &mysql-buildsize;</para></listitem>
<listitem><para>Estimated build time: &mysql-time;</para></listitem></itemizedlist>
</sect3>

<sect3><title><application>My<acronym>SQL</acronym></application> dependencies
</title>
<sect4><title>Optional</title>
<para>
<xref linkend="openssl"/>,
<xref linkend="tcpwrappers"/>,
<ulink url="http://sourceforge.net/projects/libedit/">libedit</ulink> (as an alternative to readline),
<xref linkend="ORBit"/> (detected only if <xref linkend="which"/> is installed),
<xref linkend="doxygen"/> and
<xref linkend="pst-typesetting-tex"/>
</para></sect4>
</sect3>

</sect2>

<sect2>
<title>Installation of <application>My<acronym>SQL</acronym></application>
</title>

<para>For security reasons, running the server as an unprivileged user 
and group is strongly encouraged:</para>

<screen><userinput><command>groupadd mysql &amp;&amp;
useradd -c mysql -d /dev/null -g mysql -s /bin/false mysql</command></userinput></screen>

<para>Build and install <application>My<acronym>SQL</acronym></application> by 
running the following commands:</para>

<screen><userinput><command>CPPFLAGS="-D_GNU_SOURCE" ./configure --prefix=/usr --sysconfdir=/etc \
    --libexecdir=/usr/sbin --localstatedir=/srv/mysql \
    --enable-thread-safe-client --enable-assembler \
    --enable-local-infile --with-named-thread-libs=-lpthread \
    --with-unix-socket-path=/var/run/mysql --without-debug \
    --without-bench --without-readline &amp;&amp;
make testdir=/usr/lib/mysql/mysql-test &amp;&amp;
make testdir=/usr/lib/mysql/mysql-test install &amp;&amp;
cd /usr/lib &amp;&amp;
ln -sf mysql/libmysqlclient{,_r}.so* .</command></userinput></screen>

</sect2>

<sect2>
<title>Command explanations</title>

<para><parameter>--libexecdir=/usr/sbin</parameter>: This switch installs the 
<command>mysqld</command> daemon in an appropriate location.</para>

<para><parameter>--localstatedir=/srv/mysql</parameter>: This switch forces
<application>My<acronym>SQL</acronym></application> to use 
<filename class='directory'>/srv/mysql</filename> for database files and other 
variable data.</para>

<para><parameter>--enable-thread-safe-client</parameter>: This switch compiles a 
thread-safe <application>My<acronym>SQL</acronym></application> client library.
</para>

<para><parameter>--enable-assembler</parameter>: This switch allows using 
assembler versions of some string functions.</para>

<para><parameter>--enable-local-infile</parameter>: This switch enables the
LOAD DATA INFILE <acronym>SQL</acronym> statement.</para>

<para><parameter>CPPFLAGS="-D_GNU_SOURCE" --with-named-thread-libs=-lpthread</parameter>:
This environment variable and configure switch enable building on
<acronym>NPTL</acronym> systems.</para>

<para><parameter>--with-unix-socket-path=/var/run/mysql</parameter>:
This switch puts the unix-domain socket into <filename
class="directory">/var/run/mysql</filename> directory instead of default
<filename class="directory">/tmp</filename>.</para>

<para><parameter>--without-bench</parameter>: This switch skips building the 
benchmark suite.</para>

<para><parameter>--without-readline</parameter>: This switch forces the build 
to use the system copy of <application>readline</application> instead of the 
bundled copy.</para>

<para><command>make testdir=...</command>: This installs the test suite in 
<filename class='directory'>/usr/lib/mysql/mysql-test</filename>. 
<acronym>BLFS</acronym> is currently seeking a method to omit the installation 
of the test suite altogether.</para>

<para><command>ln -sf mysql/libmysqlclient{,_r}.so* .</command>: This command
makes the <application>My<acronym>SQL</acronym></application> shared libraries 
available to other packages at run-time.</para>

<para><option>--with-libwrap</option>: This switch adds tcpwrappers
support to <application>My<acronym>SQL</acronym></application>.</para>

<para><option>--with-openssl</option>: This switch adds OpenSSL support
to <application>My<acronym>SQL</acronym></application>.</para>

</sect2>

<sect2>
<title>Configuring <application>My<acronym>SQL</acronym></application></title>

<sect3>
<title>Config files</title>

<para><filename>/etc/my.cnf</filename>, <filename>~/.my.cnf</filename></para>

</sect3>

<sect3>
<title>Configuration Information</title>

<para>There are several default configuration files available in
<filename class="directory">/usr/share/mysql</filename> which you can
use.  Create <filename>/etc/my.cnf</filename> using the following
command:</para>

<screen><userinput><command>cp /usr/share/mysql/my-medium.cnf /etc/my.cnf</command></userinput></screen>

<para>You can now install a database and change the ownership to the
unprivileged user and group.</para>

<screen><userinput><command>mysql_install_db &amp;&amp;
chown -R mysql:mysql /srv/mysql</command></userinput></screen>

<para>Further configuration requires that the 
<application>My<acronym>SQL</acronym></application> server be running:</para>

<screen><userinput><command>mysqld_safe --user=mysql 2&gt;&amp;1 &gt;/dev/null &amp;</command></userinput></screen>

<para>A default installation does not setup a password for the administrator, 
so use the following command to set one. Replace 
<replaceable>[new-password]</replaceable> with your own.</para>

<!--
<screen><userinput><command>mysql -uroot mysql</command></userinput>
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2 to server version: 3.23.51-log

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

<prompt>mysql&gt;</prompt> <userinput><command>UPDATE user SET password=password('<replaceable>new-password</replaceable>') WHERE user='root';</command></userinput>
Query OK, 2 rows affected (0.00 sec)
Rows matched: 2  Changed: 2  Warnings: 0

<prompt>mysql&gt;</prompt> <userinput><command>FLUSH PRIVILEGES;</command></userinput>
Query OK, 0 rows affected (0.00 sec)

<prompt>mysql&gt;</prompt> <userinput><command>EXIT;</command></userinput>
bye
</screen>
-->

<screen><userinput><command>mysqladmin -u root password <replaceable>[new-password]</replaceable></command></userinput></screen>

<para>Configuration of the server is now finished. Shut the server down
using the following command:</para>

<screen><userinput><command>mysqladmin -p shutdown</command></userinput></screen>

<para>Install the <filename>/etc/rc.d/init.d/mysql</filename>
init script included in the <xref linkend="intro-important-bootscripts"/> 
package.</para>

<screen><userinput><command>make install-mysql</command></userinput></screen>

</sect3>

</sect2>

<sect2>
<title>Contents</title>

<para>The <application>My<acronym>SQL</acronym></application> package contains 
<command>client_test</command>,
<command>comp_err</command>, <command>
isamchk</command>, <command>
isamlog</command>, <command>
make_win_binary_distribution</command>, <command>
make_win_src_distribution</command>, <command>
msql2mysql</command>, <command>
my_print_defaults</command>, <command>
myisam_ftdump</command>, <command>
myisamchk</command>, <command>
myisamlog</command>, <command>
myisampack</command>, <command>
mysql</command>, <command>
mysql_config</command>, <command>
mysql_convert_table_format</command>, <command>
mysql_create_system_tables</command>, <command>
mysql_explain_log</command>, <command>
mysql_find_rows</command>, <command>
mysql_fix_extensions</command>, <command>
mysql_fix_privilege_tables</command>, <command>
mysql_install_db</command>, <command>
mysql_secure_installation</command>, <command>
mysql_setpermission</command>, <command>
mysql_tableinfo</command>, <command>
mysql_tzinfo_to_sql</command>, <command>
mysql_waitpid</command>, <command>
mysql_zap</command>, <command>
mysqlacess</command>,<command>
mysqladmin</command>, <command>
mysqlbinlog</command>, <command>
mysqlbug</command>, <command>
mysqlcheck</command>, <command>
mysqld</command>, <command>
mysqld_multi</command>, <command>
mysqld_safe</command>, <command>
mysqldump</command>, <command>
mysqldumpslow</command>, <command>
mysqlhotcopy</command>, <command>
mysqlimport</command>, <command>
mysqlmanager</command>, <command>
mysqlmanager-pwgen</command>, <command>
mysqlmanagerc</command>, <command>
mysqlshow</command>, <command>
mysqltest</command>, <command>
pack_isam</command>, <command>
perror</command>, <command>
replace</command>, <command>
resolve_stack_dump</command>, <command>
resolveip</command>, <filename class="libraryfile">
libdbug</filename>, <filename class="libraryfile">
libheap</filename>, <filename class="libraryfile">
libmerge</filename>, <filename class="libraryfile">
libmyisam</filename>, <filename class="libraryfile">
libmyisammrg</filename>, <filename class="libraryfile">
libmysqlclient</filename>, <filename class="libraryfile">
libmysqlclient_r</filename>, <filename class="libraryfile">
libmystrings</filename>, <filename class="libraryfile">
libmysys</filename>, <filename class="libraryfile">
libnisam</filename> and <filename class="libraryfile">
libvio</filename>.</para>

</sect2>

<sect2><title>Description</title>

<para>A package listing would be several pages long. Consult the 
<application>My<acronym>SQL</acronym></application> documentation for full 
details instead.</para>

<para>Certain <application>My<acronym>SQL</acronym></application> support 
programs may require the <application>Perl</application> DBI modules to be 
installed to function properly.</para>

</sect2>

</sect1>
