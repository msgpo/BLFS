<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY db-download-http "http://www.sleepycat.com/update/snapshot/db-4.2.52.tar.gz">
  <!ENTITY db-download-ftp  " ">
  <!ENTITY db-size          "4.1 MB">
  <!ENTITY db-buildsize     "68 MB">
  <!ENTITY db-time          "1.22 SBU">
]>

<sect1 id="db" xreflabel="Berkeley DB-&db-version;">
<sect1info>
<othername>$LastChangedBy: $</othername>
<date>$Date: $</date>
</sect1info>
<?dbhtml filename="db.html"?>
<title>Berkeley DB-&db-version;</title>

<sect2>
<title>Introduction to <application>Berkeley DB</application></title>

<para>The <application>Berkeley DB</application> package contains programs and
utilities used by many other applications for database related
functions.</para>

<sect3><title>Package information</title>
<itemizedlist spacing='compact'>
<listitem><para>Download (HTTP): <ulink
url="&db-download-http;"/></para></listitem>
<listitem><para>Download (FTP): <ulink
url="&db-download-ftp;"/></para></listitem>
<listitem><para>Download size: &db-size;</para></listitem>
<listitem><para>Estimated Disk space required:
&db-buildsize;</para></listitem>
<listitem><para>Estimated build time:
&db-time;</para></listitem></itemizedlist>
</sect3>

<sect3><title>Additional downloads</title>
<itemizedlist spacing='compact'>
<listitem><para>Required Patch: <ulink
url="http://www.sleepycat.com/update/4.2.52/patch.4.2.52.1"/></para></listitem>
<listitem><para>Required Patch: <ulink
url="http://www.sleepycat.com/update/4.2.52/patch.&db-version;"/></para></listitem>
</itemizedlist></sect3>

<sect3><title><application>Berkeley DB</application> dependencies</title>
<sect4><title>Optional</title>
<para><xref linkend="tcl"/> and <xref linkend="j2sdk"/>
</para></sect4>
</sect3>

</sect2>

<sect2>
<title>Installation of <application>Berkeley DB</application></title>

<para>Install <application>Berkeley DB</application> by running the following 
commands:</para>

<screen><userinput><command>patch -Np0 -i ../patch.4.2.52.1 &amp;&amp;
patch -Np0 -i ../patch.&db-version; &amp;&amp;
cd build_unix &amp;&amp;
../dist/configure --prefix=/usr \
    --enable-compat185 \
    --enable-cxx &amp;&amp;
make LIBSO_LIBS="-lpthread" LIBXSO_LIBS="-lpthread" &amp;&amp;
make docdir=/usr/share/doc/db-&db-version; install</command></userinput></screen>

<para><emphasis>Note:</emphasis> If you build the package with one user, then 
switch to the root user to install the package, 
<application>Berkeley DB</application> will install the files with ownerships
of the user building the package. This is undesireable. Change the ownership of 
the installed files using the following commands:</para>

<screen><userinput><command>chown root:root /usr/bin/db_* \
/usr/lib/libdb* /usr/include/db* &amp;&amp;
find /usr/share/doc/db-4.2.52.2 -exec chown -R root:root {} \;</command></userinput></screen>

<!-- <note><para>If you wish to enable <application>Java</application>
support in <application>Berkeley DB</application>-&db-version;, add
<parameter>-enable-java</parameter> to the configure options. This requires a
Java compiler.
<application>Java</application> support is needed
if you plan to use system installed <application>Berkeley DB</application> when 
compiling <xref linkend="openoffice"/>.</para></note> -->

</sect2>

<sect2>
<title>Command explanations</title>

<para><command>cd build_unix &amp;&amp; 
../dist/configure --prefix=/usr...</command>: 
This replaces the normal <command>./configure</command> command, as
<application>Berkeley DB</application> comes with various 
build directories for different platforms.</para>

<para><command>make LIBSO_LIBS="-lpthread"
LIBXSO_LIBS="-lpthread"</command>:  configure does not correctly handle 
<acronym>NPTL</acronym>.  These variables force it to properly link 
against <acronym>NPTL</acronym>.</para> 

<para><command>make docdir=/usr/share/doc/db-&db-version; 
install</command>: This installs the documentation in
the correct place.</para>

<para><option>--enable-tcl</option> <parameter>--with-tcl=/usr/lib</parameter>:
enables <application>Tcl</application> support in DB and creates the
<filename class="libraryfile">libdb_tcl</filename> libraries.</para>

<para><option>--enable-java</option>: enables <application>Java</application>
support in DB and creates the 
<filename class='libraryfile'>libdb_java</filename> libraries.</para>

</sect2>

<sect2>
<title>Contents</title>

<para>The <application>Berkeley DB</application> package contains
<command>db_archive</command>,
<command>db_checkpoint</command>,
<command>db_deadlock</command>,
<command>db_dump</command>,
<command>db_load</command>,
<command>db_printlog</command>,
<command>db_recover</command>,
<command>db_stat</command>,
<command>db_upgrade</command>, 
<command>db_verify</command> and the 
<filename class='libraryfile'>libdb</filename> libraries.

</para>

</sect2>

<sect2><title>Description</title>

<sect3><title>db_archive</title>
<para><command>db_archive</command> prints the pathnames of log files that are 
no longer in use.</para></sect3>


<sect3><title>db_checkpoint</title>
<para><command>db_checkpoint</command> is a daemon process used to monitor and 
checkpoint database logs.</para></sect3>

<sect3><title>db_deadlock</title>
<para><command>db_deadlock</command> is used to abort lock requests when 
deadlocks are detected.</para></sect3>

<sect3><title>db_dump</title>
<para><command>db_dump</command> converts database files to a flat file format 
readable by <command>db_load</command>.</para></sect3>

<sect3><title>db_load</title>
<para><command>db_load</command> is used to create database files from flat 
files created with <command>db_dump</command>.</para></sect3>

<sect3><title>db_printlog</title>
<para><command>db_printlog</command> converts database log files to human 
readable text.</para></sect3>

<sect3><title>db_recover</title>
<para><command>db_recover</command> is used to restore a database to a 
consistent state after a failure.</para></sect3>

<sect3><title>db_stat</title>
<para><command>db_stat</command> displays database environment statistics.
</para></sect3>

<sect3><title>db_upgrade</title>
<para><command>db_upgrade</command> is used to upgrade database files to a 
newer version of <application>Berkeley DB</application>.</para></sect3>

<sect3><title>db_verify</title>
<para><command>db_verify</command> is used to run consistency checks on 
database files.</para></sect3>

</sect2>

</sect1>
