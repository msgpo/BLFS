<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY proftpd-download-http "http://ftp.proftpd.org/distrib/source/proftpd-&proftpd-version;.tar.bz2">
  <!ENTITY proftpd-download-ftp  "ftp://ftp.proftpd.org/distrib/source/proftpd-&proftpd-version;.tar.bz2">
  <!ENTITY proftpd-md5sum        "5feb4a7348e12faefc25e34fd92efdd6">
  <!ENTITY proftpd-size          "901 KB">
  <!ENTITY proftpd-buildsize     "7.3 MB">
  <!ENTITY proftpd-time          "0.27 SBU">
]>

<sect1 id="proftpd" xreflabel="ProFTPD-&proftpd-version;">
<sect1info>
  <othername>$LastChangedBy$</othername>
  <date>$Date$</date>
</sect1info>

<?dbhtml filename="proftpd.html"?>
<title><application>Pro<acronym>FTP</acronym>D</application>-&proftpd-version;</title>

<indexterm zone="proftpd">
  <primary sortas="a-proftpd">Proftpd</primary>
</indexterm>

<sect2>
<title>Introduction to <application>Pro<acronym>FTP</acronym>D</application></title>

<para>The <application>Pro<acronym>FTP</acronym>D</application> package 
contains a secure and highly configurable <acronym>FTP</acronym> daemon. This 
is useful for serving large file archives over a network.</para>

<sect3>
<title>Package information</title>
<itemizedlist spacing='compact'>
  <listitem><para>Download (HTTP): <ulink url="&proftpd-download-http;"/></para></listitem>
  <listitem><para>Download (FTP): <ulink url="&proftpd-download-ftp;"/></para></listitem>
  <listitem><para>Download MD5 sum: &proftpd-md5sum;</para></listitem>
  <listitem><para>Download size: &proftpd-size;</para></listitem>
  <listitem><para>Estimated disk space required: &proftpd-buildsize;</para></listitem>
  <listitem><para>Estimated build time: &proftpd-time;</para></listitem>
</itemizedlist>
</sect3>

<sect3>
<title><application>Pro<acronym>FTP</acronym>D</application> dependencies</title>

<sect4>
<title>Optional</title>

<para><xref linkend="Linux_PAM"/></para>

</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation of <application>Pro<acronym>FTP</acronym>D</application></title>

<para>For security reasons, you should install
<application>Pro<acronym>FTP</acronym>D</application> using an unprivileged user
and group.  As the root user:</para>

<screen><userinput><command>groupadd proftpd &amp;&amp;
useradd -c proftpd -d /home/ftp -g proftpd \
        -s /usr/lib/proftpd/proftpdshell proftpd &amp;&amp;
install -d -m775 -o proftpd -g proftpd /usr/lib/proftpd &amp;&amp;
ln -s /bin/false /usr/lib/proftpd/proftpdshell &amp;&amp;
echo /usr/lib/proftpd/proftpdshell &gt;&gt; /etc/shells</command></userinput></screen>

<para>Install <application>Pro<acronym>FTP</acronym>D</application> as a regular user by running 
the following commands:</para>

<screen><userinput><command>install_user=proftpd install_group=proftpd \
    ./configure --prefix=/usr --sysconfdir=/etc \
    --localstatedir=/var/run &amp;&amp;
make</command></userinput></screen>

<para>Now, again as the root user:</para>
 
<screen><userinput role='root'><command>make install</command></userinput></screen>

</sect2>

<sect2>
<title>Command explanations</title>

<para><command>install -d -m775 -o proftpd -g proftpd /usr/lib/proftpd</command>: 
Create the home directory for <application>Pro<acronym>FTP</acronym>D</application>.</para>

<para><command>ln -s /bin/false /usr/lib/proftpd/proftpdshell</command>:
Set the default shell as a link to a invalid shell.</para> 

<para><command>echo /usr/lib/proftpd/proftpdshell &gt;&gt; /etc/shells</command>:
Fake a valid shell for compatability purposes.</para>

<note><para>The above three commands can be ommitted if the following directive is 
placed in the configuration file:

<screen>RequireValidShell off</screen>

By default, proftpd will require that users logging in have valid shells. 
The RequireValidShell directive turns off this requirement.  This is only
recommended if you are setting up your <acronym>FTP</acronym> server exclusively 
for anonymous downloads.
</para></note>

<para><parameter>install_user=proftpd install_group=proftpd</parameter>:
Specify the user and group identity for 
<application>Pro<acronym>FTP</acronym>D</application>.</para>

<para><parameter>--sysconfdir=/etc</parameter>:
This prevents the configuration files from going to
<filename class="directory">/usr/etc</filename>.</para>

<para><parameter>--localstatedir=/var/run</parameter>:
This uses <filename class="directory">/var/run</filename> instead of
<filename class="directory">/usr/var</filename> for lock files.</para>

</sect2>

<sect2>
<title>Configuring <application>Pro<acronym>FTP</acronym>D</application></title>

<sect3 id='proftpd-init'>
<title>proftpd init.d script</title>

<indexterm zone="proftpd proftpd-init">
  <primary sortas="f-proftpd">proftpd</primary>
</indexterm>


<para>Install the <filename>/etc/rc.d/init.d/proftpd</filename> init script 
included in the <xref linkend="intro-important-bootscripts"/> package.</para>

<screen><userinput><command>make install-proftpd</command></userinput></screen>

</sect3>

<sect3 id='proftpd-config'>
<title>Config files</title>

<indexterm zone="proftpd proftpd-config">
   <primary sortas="e-etc-proftpd">/etc/proftpd.conf</primary>
</indexterm>

<para><filename>/etc/proftpd.conf</filename></para>
</sect3>

<sect3><title>Configuration information</title>
<para>This is a simple, download-only sample configuration. See the 
<application>Pro<acronym>FTP</acronym>D</application> documentation in 
<filename class="directory">/usr/share/doc/proftpd</filename> and consult the 
website at <ulink url="http://www.proftpd.org/"/> for example 
configurations.</para>

<screen><userinput><command>cat &gt; /etc/proftpd.conf &lt;&lt; "EOF"</command>
# This is a basic ProFTPD configuration file
# It establishes a single server and a single anonymous login.

ServerName                      "ProFTPD Default Installation"
ServerType                      standalone
DefaultServer                   on

# Port 21 is the standard FTP port.
Port                            21
# Umask 022 is a good standard umask to prevent new dirs and files
# from being group and world writable.
Umask                           022

# To prevent DoS attacks, set the maximum number of child processes
# to 30.  If you need to allow more than 30 concurrent connections
# at once, simply increase this value.  Note that this ONLY works
# in standalone mode, in inetd mode you should use an inetd server
# that allows you to limit maximum number of processes per service
# (such as xinetd)
MaxInstances                    30

# Set the user and group that the server normally runs at.
User                            proftpd
Group                           proftpd

# Normally, files should be overwritable.
&lt;Directory /*&gt;
  AllowOverwrite                on
&lt;/Directory&gt;

# A basic anonymous configuration, no upload directories.
&lt;Anonymous ~proftpd&gt;
  User                          proftpd
  Group                         proftpd
  # Clients should be able to login with "anonymous" as well as "proftpd"
  UserAlias                     anonymous proftpd

  # Limit the maximum number of anonymous logins
  MaxClients                    10

  # 'welcome.msg' should be displayed at login, and '.message' displayed
  # in each newly chdired directory.
  DisplayLogin                  welcome.msg
  DisplayFirstChdir             .message

  # Limit WRITE everywhere in the anonymous chroot
  &lt;Limit WRITE&gt;
    DenyAll
  &lt;/Limit&gt;
&lt;/Anonymous&gt;
<command>EOF</command></userinput></screen></sect3>

</sect2>

<sect2>
<title>Contents</title>

<segmentedlist>
  <segtitle>Installed Programs</segtitle>
  <segtitle>Installed Libraries</segtitle>
  <segtitle>Installed Directory</segtitle>
 
  <seglistitem>
    <seg>ftpcount, ftpdctl, ftptop, ftpwho, ftpshut, proftpd</seg>
    <seg>None</seg>
    <seg>/var/run/proftpd</seg>
  </seglistitem>
</segmentedlist>
 
<variablelist>
  <bridgehead renderas="sect3">Short Descriptions</bridgehead>
  <?dbfo list-presentation="list"?>

<varlistentry id="proftpd-prog">
  <term><command>proftpd</command></term>
  <listitem>
    <para>is the <acronym>FTP</acronym> daemon.</para>
    <indexterm zone="proftpd proftpd-prog">
      <primary sortas="b-proftpd">proftpd</primary>
    </indexterm>
  </listitem>
</varlistentry>

<varlistentry id="ftpcount">
  <term><command>ftpcount</command></term>
  <listitem>
    <para>shows the current number of connections.</para>
    <indexterm zone="proftpd ftpcount">
      <primary sortas="b-ftpcount">ftpcount</primary>
    </indexterm>
  </listitem>
</varlistentry>

<varlistentry id="ftpshut">
  <term><command>ftpshut</command></term>
  <listitem>
    <para>shuts down all <application>proftpd</application> servers at a given time.</para>
    <indexterm zone="proftpd ftpshut">
      <primary sortas="b-ftpshut">ftpshut</primary>
    </indexterm>
  </listitem>
</varlistentry>

<varlistentry id="ftptop">
  <term><command>ftptop</command></term>
  <listitem>
    <para>displays running status on connections.</para>
    <indexterm zone="proftpd ftptop">
      <primary sortas="b-ftptop">ftptop</primary>
    </indexterm>
  </listitem>
</varlistentry>

<varlistentry id="ftpwho">
  <term><command>ftpwho</command></term>
  <listitem>
    <para>shows current process information for each session.</para>
    <indexterm zone="proftpd ftpwho">
      <primary sortas="b-ftpwho">ftpwho</primary>
    </indexterm>
  </listitem>
</varlistentry>

</variablelist>
</sect2>

</sect1>

