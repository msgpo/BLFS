<sect2>
<title>Installation of j2sdk</title>

<para>Both versions will be installed in parallel. You may choose to keep either
or both.</para>

<para>Installation of the precompiled JDK is easy, change the executable bit for
the downloaded file, change to the directory where you want it installed
and execute the downloaded file.</para>

<para><screen><userinput>VERSION=&j2sdk-bin-version; &amp;&amp;
MV=`echo $VERSION | cut -d "_" -f 1,1` &amp;&amp;
V=`echo ${VERSION} | sed -e "s/\./_/g"` &amp;&amp;
chmod +x j2sdk-${V}-linux-i?86.bin &amp;&amp;
./j2sdk-${V}-linux-i?86.bin &amp;&amp;
cd j2sdk${VERSION} &amp;&amp;
install -d /opt/j2sdk/j2sdk-precompiled-${MV} &amp;&amp;
mv * /opt/j2sdk/j2sdk-precompiled-${MV}</userinput></screen></para>

<para>The binary version is now installed.</para>

<para>If you don't want to compile the source, skip ahead to the configuration
section.</para>

<para>Add the recently compiled JDK to the path.</para>
<screen><userinput>export JAVA_HOME=/opt/j2sdk/j2sdk-precompiled-${MV} &amp;&amp;
export PATH=$PATH:${JAVA_HOME}/bin</userinput></screen>

<para>Unzip and patch the source:</para>

<para><screen><userinput>VERSION=&j2sdk-src-version; &amp;&amp;
V=`echo $VERSION | sed -e "s/\./_/g"` &amp;&amp;
unzip j2sdk-${V}-src-scsl.zip &amp;&amp;
unzip j2sdk-${V}-mozilla_headers-unix.zip &amp;&amp;
patch -Np1 -i j2sdk-${VERSION}-gcc33-1.patch &amp;&amp;
patch -Np1 -i j2sdk-${VERSION}-fix-intl-files.patch &amp;&amp;
patch -Np1 -i j2sdk-${VERSION}-link-missing-libs.patch &amp;&amp;
patch -Np1 -i j2sdk-${VERSION}-remove-fixed-paths.patch &amp;&amp;
patch -Np1 -i j2sdk-${VERSION}-syntax-fixes.patch &amp;&amp;
patch -Np1 -i j2sdk-${VERSION}-use-included-motif.patch</userinput></screen></para>

<para>Set some vars which affect the build:</para>
<para><screen><userinput>export ALT_BOOTDIR="$JAVA_HOME" &amp;&amp;
unset JAVA_HOME &amp;&amp;
unset CLASSPATH
unset CFLAGS
unset CXXFLAGS
unset LDFLAGS
export ALT_DEVTOOLS_PATH="/usr/bin" &amp;&amp;
export BUILD_NUMBER="blfs-`date +%s`" &amp;&amp;
export DEV_ONLY=true &amp;&amp;
export ALT_MOZILLA_PATH=$PWD &amp;&amp;
export INSANE=true &amp;&amp;
export MAKE_VERBOSE=true &amp;&amp;
export ALT_CACERTS_FILE=${ALT_BOOTDIR}/jre/lib/security/cacerts</userinput></screen></para>

<para>The included motif doesn't build properly with the current glibc/xfree86.
A solution is to build the motif library before compiling the j2sdk. Note that
the motif build fails during the first run owing to some syntax error. The
brute force and easiest solution is to rerun the make command:)</para>

<para><screen><userinput>cd motif/lib/Xm &amp;&amp;
make || make &amp;&amp;
cd ../../..</userinput></screen></para>

<para>Make and Install j2sdk with the following commands. There will be a lot of
messages about missing files that look like errors. As long as the build doesn't
stop, the messages are harmless, so ignore them.</para>

<para><screen><userinput>cd control/make &amp;&amp;
make &amp;&amp;
cd ../.. &amp;&amp;
cd control/build/linux-i?86 &amp;&amp;
cp -a j2sdk-image /opt/j2sdk/j2sdk-&j2sdk-src-version;</userinput></screen></para>

</sect2>

